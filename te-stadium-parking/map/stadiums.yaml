import: https://raw.githubusercontent.com/tangrams/zinc-style/gh-pages/zinc-style.yaml

# This style highlights unnamed features of the selected types in red.
# Search for "nameless" to find the featured layer,
# The basemap is Zinc, a light gray style optimized for data visualization overlays.  
# Give OpenStreetMap data a professional basemap skin using the Tangram graphics  
# library and Mapzen's versatile Vector Tiles. 
# Please use and adapt the open source scene file in your own projects!
#
# Zinc Authors: Nathaniel V. Kelso, Geraldine Sarmiento

cameras:
    camera1:
        type: perspective
        position: [-121.970080, 37.403131, 16] # lon/lat for Santa Clara, CA at zoom 16

labels-global:
    - &icon_visible_populated_places  false
    - &text_visible_building          false
    - &text_visible_address           false
    - &label_visible_poi_landuse_e    false
    - &text_visible_poi_landuse_e     false
    - &text_visible_shields           false
    - &text_visible_exits             false

sources:
    osm:
        url:  //vector.mapzen.com/osm/all/{z}/{x}/{y}.topojson?api_key=vector-tiles-loxxPrQ

layers:
    mz_route_line:
        visible: false
    # Special overlay for Targeted Editing seris
    stadiums:
        data: { source: osm, layer: [pois,landuse,buildings] }
        filter: 
            all:
                - kind: [stadium]
            any:
                - area: false
                - area: true
                  all:
                      - $geometry: point
                      - kind: true
        draw:
            icons:
                size: [[13, 14px], [16, 16px], [19, 20px]]
                sprite: stadium
                interactive: true
                order: 1000
                color: aqua
                visible: true
                priority: 3
            text:
                interactive: true
                move_into_tile: true
                priority: 4
                anchor: bottom
                offset: [[13, [0, 7px]], [16, [0, 8px]], [19, [0, 10px]]] # offset tracks alongside icon size (half icon height)
                font:
                    family: Helvetica
                    weight: 500
                    style: italic
                    fill: '#000000'
                    size: 12px
                    stroke: { color: aqua, width: 2 }
    stadium-landuse-aois:
        data: { source: osm, layer: [landuse] }
        filter:
            any:
                - kind: [stadium]
        draw:
            polygons:
                interactive: true
                color: '#cbbbd7'
                order: 100
    parking-landuse-aois-good:
        data: { source: osm, layer: [landuse] }
        filter:
            any:
                - kind: [parking]   #apron
            all:
                - $zoom: { min: 15 }
        draw:
            polygons:
                interactive: true
                color: '#cbbbd7'
                order: 130
    parking_aisle-lines-good:
        data: { source: osm, layer: [roads] }
        filter:
            all:
                - kind: minor_road
                - service: [parking_aisle]
#            any:
#                - landuse_kind: [stadium,parking]
        draw:
            lines:
                order: 430
                color: '#817f83'
                width: [[13,0.5px],[15, 1px], [16, 1.5px], [18, 4m], [19, 4.5m]]
                outline:
                    order: 420
                    color: '#b085d7'
                    width: [[15, 0px], [16, 0.5px], [17, 1.0px], [18, 1.75px]]
    stadium-buildings-good:
        data: { source: osm, layer: [buildings] }
        filter:
            any:
                - landuse_kind: [stadium]
        draw:
            polygons:
                color: '#bdadbf'
                order: function() { if( $zoom < 17) { return 14; } else { return 12; } }
                #extrude: function() { return feature.height || 20; }
            outline:
                style: lines
                order: 500
                color: '#d534df'
                width: [[14,0.1px],[15,0.5px],[17,0.5px],[18,0.75px],[19,0.25m]]
                #extrude: function() { return feature.height || 20; }
    stadium-buildings-bad:
        data: { source: osm, layer: [buildings] }
        filter:
            any:
                - kind: [stadium]
            not:
                - landuse_kind: [stadium]
        draw:
            polygons:
                interactive: true
                color: '#dd7a7a'
                order: function() { if( $zoom < 17) { return 14; } else { return 12; } }
                #extrude: function() { return feature.height || 20; }
            outline:
                style: lines
                order: 500
                color: '#df9c34'
                width: [[14,0.1px],[15,0.5px],[16,1.25px],[17,2.0px],[18,2.5px],[19,2m]]
                #extrude: function() { return feature.height || 20; }

    # Map overlays for styling the server response (using special source layer names) for route line, find_me location gem, and search result pins
    route:
        data: { source: route }
        draw:
            ui-lines-overlay:
                color: '#06a6d4'
    mz_current_location_gem:
        visible: false
    current_location_gem:
        data: { source: find_me }
    mz_route_location:
        visible: false
    route_icon:
        data: { source: route_icon }
    mz_route_start:
        visible: false
    route_start:
        data: { source: route_start }
    mz_route_stop:
        visible: false
    route_stop:
        data: { source: route_stop }
    mz_search_result:
        visible: false
    search:
        data: { source: search }
    mz_dropped_pin:
        visible: false
    reverse_geocode:
        data: { source: reverse_geocode }
    mz_default_point:
        visible: false
    mz_default_line:
        visible: false
    mz_default_polygon:
        visible: false

    roads:
        draw:
            lines:
                outline:
                    #order: 21 # 15 is the starting aboveground level, plus 6 (this is false, with layer it can be as low as 4 or even negative!?)
    places:
        populated-places:
            populated-places-natural-earth-z3:
                z3places-1:
                    draw:
                        icons:
                            visible: true
                z3places-2:
                    draw:
                        icons:
                            visible: true
            populated-places-natural-earth-z5:
                z5places-3:
                    draw:
                        icons:
                            visible: true
            populated-places-osm-z8:
                filter:
                    all:
                        - source: [openstreetmap]
                        - name: true
                        - population: true
                        - not: { kind: [country, county, state, island, neighbourhood, suburb, quarter] }
                        - $zoom: [8]
            populated-places-osm-z9-no-population:
                filter:
                    all:
                        - source: [openstreetmap]
                        - name: true
                        - population: false
                        - not: { kind: [country, county, state, island, neighbourhood, suburb, quarter] }
                        - $zoom: [9]
                        - kind: [city,town]
            populated-places-osm-z10:
                filter:
                    all:
                        - source: [openstreetmap]
                        - name: true
                        - population: true
                        - not: { kind: [country, county, state, island, neighbourhood, suburb, quarter] }
                        - $zoom: [10]
            populated-places-osm-z10-no-population:
                filter:
                    all:
                        - source: [openstreetmap]
                        - name: true
                        - population: false
                        - not: { kind: [country, county, state, island, neighbourhood, suburb, quarter] }
                        - $zoom: [10]
                        - kind: [city,town]
            populated-places-osm-z11:
                filter:
                    all:
                        - source: [openstreetmap]
                        - name: true
                        - population: true
                        - not: { kind: [country, county, state, island, neighbourhood, suburb, quarter] }
                        - $zoom: [11]
                        - kind: [city,town]
            populated-places-osm-z11-no-population:
                filter:
                    all:
                        - source: [openstreetmap]
                        - name: true
                        - population: false
                        - not: { kind: [country, county, state, island, neighbourhood, suburb, quarter] }
                        - $zoom: [11]
                        - kind: [city,town]
            populated-places-osm-z12:
                filter:
                    all:
                        - source: [openstreetmap]
                        - name: true
                        - population: true
                        - not: { kind: [country, county, state, island, neighbourhood, suburb, quarter] }
                        - $zoom: [12]
                        - kind: [city,town]
            populated-places-osm-z12-no-population:
                filter:
                    all:
                        - source: [openstreetmap]
                        - name: true
                        - population: false
                        - not: { kind: [country, county, state, island, neighbourhood, suburb, quarter] }
                        - $zoom: [12]
                        - kind: [city,town]
            populated-places-osm-z13-z14:
                filter:
                    all:
                        - source: [openstreetmap]
                        - name: true
                        - population: true
                        - not: { kind: [country, county, state, island, neighbourhood, suburb, quarter] }
                        - $zoom: [13,14]
                        - kind: [city,town]
            populated-places-osm-z13-z14-no-population:
                filter:
                    all:
                        - source: [openstreetmap]
                        - name: true
                        - population: false
                        - not: { kind: [country, county, state, island, neighbourhood, suburb, quarter] }
                        - $zoom: [13, 14]
                        - kind: [city,town]
            neighborhood-z11:
                filter:
                    all:
                        - name: true
                        - kind: [macrohood, neighbourhood]
                        - $zoom: [11]
                    any:
                        - source: [openstreetmap]
                        - source: [whosonfirst]
                          all:
                            - min_zoom: [11]
                            - max_zoom: { min: 12 }
                            - is_landuse_aoi: false
                            #- kind_tile_rank: { max: 6 }
            neighborhood-z12:
                filter:
                    all:
                        - name: true
                        - kind: [macrohood, neighbourhood]
                        - $zoom: [12]
                    any:
                        - source: [openstreetmap]
                        - source: [whosonfirst]
                          all:
                            - min_zoom: [11,12]
                            - max_zoom: { min: 13 }
                            - is_landuse_aoi: false
                            #- kind_tile_rank: { max: 8 }
            neighborhood-z13:
                filter:
                    all:
                        - name: true
                        - kind: [macrohood, neighbourhood]
                        - $zoom: [13]
                    any:
                        - source: [openstreetmap]
                        - source: [whosonfirst]
                          all:
                            - min_zoom: [11,12,13]
                            - max_zoom: { min: 14 }
                            - is_landuse_aoi: false
                            - kind_tile_rank: { max: 8 }
            neighborhood-z14:
                filter:
                    all:
                        - name: true
                        - kind: [macrohood, neighbourhood]
                        - $zoom: [14]
                    any:
                        - source: [openstreetmap]
                        - source: [whosonfirst]
                          all:
                            - min_zoom: [11,12,13,14]
                            - max_zoom: { min: 15 }
                            - is_landuse_aoi: false
                            - kind_tile_rank: { max: 8 }
            neighborhood-z15:
                filter:
                    all:
                        - name: true
                        - kind: [macrohood, neighbourhood]
                        - $zoom: [15]
                    any:
                        - source: [openstreetmap]
                        - source: [whosonfirst]
                          all:
                            - min_zoom: [11,12,13,14,15]
                            - max_zoom: { min: 16 }
                            - is_landuse_aoi: false
                            - kind_tile_rank: { max: 8 }
            neighborhood-z16:
                filter:
                    all:
                        - name: true
                        - kind: [macrohood, neighbourhood]
                        - $zoom: [16]
                    any:
                        - source: [openstreetmap]
                        - source: [whosonfirst]
                          all:
                            - min_zoom: [11,12,13,14,15,16]
                            - max_zoom: { min: 17 }
                            - is_landuse_aoi: false
                            - kind_tile_rank: { max: 8 }
    airport-gate:
        data: { source: osm, layer: [pois] }
        filter: { kind: gate, aeroway: gate }
        draw:
            text-blend-order:
                visible: true